appId: com.operators.relay
productName: "Relay"
asar: true
asarUnpack:
  # Unpack critical files for faster first access on Windows
  - "dist/main/**"
  - "dist/preload/**"
files:
  - dist/**
  - package.json
  - resources/**
  - "!node_modules/fsevents/**"
  - "!**/*.{md,ts,map}"
  - "!**/LICENSE"
  - "!**/.{git,github,vscode}"
  - "!**/tsconfig*.json"
  - "!**/.eslintrc*"
  - "!**/.prettierrc*"
directories:
  output: release
  buildResources: resources
npmRebuild: false
extraResources:
  - from: data
    to: data
extraFiles:
  - from: "node_modules/electron/dist/ffmpeg.dll"
    to: "."
win:
  target:
    - target: portable
      arch: x64
  artifactName: "Relay.exe"
  icon: build/icon.ico
  # Windows-specific optimizations for faster startup
  requestedExecutionLevel: "asInvoker"
  # Use NSIS for better startup performance than portable in some cases
  # But keeping portable as requested - it's already optimized
compression: "store" # No compression = faster startup
# Electron download optimizations
electronDownload:
  cache: ".electron"

mac:
  target:
    - target: dmg
      arch:
        - arm64
        - x64
  artifactName: "Relay-${arch}.dmg"
  category: public.app-category.developer-tools
